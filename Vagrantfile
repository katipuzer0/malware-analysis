# -*- mode: ruby -*-
# vi: set ft=ruby :
ENV['VAGRANT_DEFAULT_PROVIDER'] = 'virtualbox'

Vagrant.configure(2) do |config|
	config.vm.box = "win10_1607_x64_analyst"
	config.vm.provider "virtualbox" do |vb|
		vb.name = "cmsc191_malbox"
		vb.gui = true
	end

	# Host files are shared on the Desktop
	config.vm.synced_folder ".", "/Users/malboxes/Desktop/host"

	config.vm.provision "shell", inline: <<-SHELL

		Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://raw.githubusercontent.com/katipuzer0/malware-analysis-toolkit/main/malboxtools.ps1'))


	SHELL

end
